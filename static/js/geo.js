// Generated by CoffeeScript 1.3.3
(function() {
  var GPS,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  GPS = (function() {

    GPS.prototype.threshold = 50;

    function GPS(callback) {
      this.callback = callback != null ? callback : null;
      this.watch_position_error = __bind(this.watch_position_error, this);

      this.watch_position_callback = __bind(this.watch_position_callback, this);

      if (!Modernizr.geolocation) {
        return false;
      }
      this.watch_id = navigator.geolocation.watchPosition(this.watch_position_callback);
    }

    GPS.prototype.watch_position_callback = function(location) {
      if (location.coords.accuracy >= this.threshold) {
        navigator.geolocation.clearWatch(this.watch_id);
        return this.callback && this.callback(location);
      }
    };

    GPS.prototype.watch_position_error = function(error) {
      return alert(error.message);
    };

    return GPS;

  })();

  window.GPS = GPS;

}).call(this);
